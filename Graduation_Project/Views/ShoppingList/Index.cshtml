@using Entity;
@model List<ShoppingList>
@{
    double totalPrice = 0;
}
<h1>Shopping Lists</h1>

<a asp-action="Create">Create New</a>
<div class="row">

	@foreach (var shoppingList in Model)
	{
        
		<div class="col-md-4">
			<table class="table">
				<thead>
					<tr>
						<th>Liste Adı : @shoppingList.Name</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Product Name</th>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <partial name="_AddProductPartialView"/>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>
                                    <strong>@totalPrice.ToString("C")</strong>
                                </td>
                                <td>
                                    <form asp-action="Index" asp-route-id="@shoppingList.Id" method="post" >
                                        <button type="submit" class="btn btn-primary">Alışverişe Çıkıyorum</button>
                                    </form>

                                </td>
                            </tr>
                        </tfoot>
                    </table>
				</tbody>
				<tfoot>
					<tr>
                        <td>
                            @if (shoppingList.IsCompleted==false)
                            {
                                <a asp-controller="Home" asp-action="Index" asp-route-shoppingListId="@shoppingList.Id">Ürün Ekle</a>
                            }
							<form asp-action="Delete" asp-route-id="@shoppingList.Id" method="post" onsubmit="return confirm('Alışveriş Listesini silmek istediğinize emin misiniz ? ');">
								<button type="submit" class="btn btn-danger">Delete</button>
							</form>
						</td>
					</tr>

				</tfoot>
			</table>
		</div>
	}

</div>